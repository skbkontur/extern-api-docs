.. _сервиса генерации тестовых данных: https://developer.kontur.ru/doc/extern.test.tools
.. _`спецификации ФНС`: https://normativ.kontur.ru/document?moduleId=8&documentId=428021&rangeId=6334073
.. _`нормативных документах`: https://normativ.kontur.ru/document?moduleId=1&documentId=124268

Наименование файлов
===================

.. _rst-markup-namefileFNS:

Наименование файлов для отчетов ФНС
-----------------------------------

.. note:: Все файлы отчетов в формате xml, которые будут отправлены в ИФНС, должны быть сохранены в кодировке windows-1251.

Для отчетов в ФНС в формате xml имя файла **дублируется внутри самого файла** в теге Файл, параметр ИдФайл. То есть и в названии, и в теге имя файла должно полностью совпадать.

Формат имени файла установлен в `нормативных документах`_. Имя файла для ФНС будет состоять из следующих частей:
 
- название формы отчетности по приказу,
- код транзитной инспекции  (код МРИ),
- код конечной инспекции,
- ИНН-КПП слитно без разделителей (если по доверенности, то ИНН-КПП отправителя),
- дата формирования файла,
- идентификатор файла.

Например, для файла отчета Налог на прибыль имя файла будет выглядеть следующим образом:

**NO_PRIB_0007_0007_6676130154667601001_20240523_d64a75f2-5559-46c6-87e9-fad102012cdd**

Поменять данные и имя внутри файла можно вручную или с помощью `сервиса генерации тестовых данных`_. В данном API мы создали методы для генерации тестовых файлов на основе введенных данных.  



Наименование банковской гарантии
--------------------------------

Для сканов банковских гарантий имя файла должно принимать вид согласно `спецификации ФНС`_:

**0270_SenderInnSenderKpp_IfnsCode_DocGUID_Date_FileGUID.pdf**

Описание элементов имени файла:

* **0270** — обязательный префикс.
* **SenderInnSenderKpp** — идентификатор отправителя. Для организации указывается ИНН и КПП. Для индивидуальных предпринимателей указывается ИНН.
* **IfnsCode** — код налогового органа, состоит из 4 цифр. 
* **DocGUID** — идентификационный номер документа.
* **Date** — дата формирования файла. Возможный формат данных: 20230317.
* **FileGUID** — идентификационный номер файла, уникален для каждого файла независимо от принадлежности к документу.

Файл может иметь разрешения: tif, jpg, pdf или png.

Пример названия банковской доверенности:

0270_7381415822111135111_0007_57339ddc-9be2-4431-a072-ae88feb6dd6a_20230317_c6725eb5-56af-40b0-8e87-0e71bb83d039.pdf

Доверенность на представителя банка должна быть подписана усиленной квалифицированной электронной подписью в формате .sgn. Названия файла формируется на основе имени файла банковской гарантии:

**0270_SenderInnSenderKpp_IfnsCode_DocGUID_Date_FileGUID_SGN_GUID.sgn**

Описание элементов имени файла:

* **SGN** — обязательный элемент, название не изменяется.
* **GUID** — идентификационный номер подписи.

Пример названия файла подписи:

0270_7381415822111135111_0007_57339ddc-9be2-4431-a072-ae88feb6dd6a_20230317_c6725eb5-56af-40b0-8e87-0e71bb83d039_SGN_001.sgn