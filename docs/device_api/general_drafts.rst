Передача черновика в веб-интерфейс Контур.Экстерна
==================================================

Теперь можно работать с черновиками и в API, и в веб-интерфейсе Контур.Экстерна. Можно создать черновик, наполнить его в своем программном обеспечении (ПО) и передать в веб-интерфейс с помощью методов API. Пользователь может отредактировать такой черновик в веб-интерфейсе, подписать и отправить его. После передачи черновики не синхронизируются, поэтому на стороне API они будут заблокированы для каких-либо действий.

Такое разграничение работы с черновиками подходит для случаев, когда в ПО нет возможности подписать документы. В своем ПО бухгалтер может сформировать xml-файлы отчетов и с помощью методов API передать в веб-интерфейс Контур.Экстерна. Бухгалтер или другое ответственное лицо сможет подписать и отправить отчет в контролирующий орган. 

Можно передавать черновики в веб-интерфейс для следующих типов документооборотов:

* декларации, 2-НДФЛ и 6-НДФЛ в ФНС (urn:docflow:fns534-report);
* заявления в ФНС (urn:docflow:fns534-application);
* представления в ФНС (urn:docflow:fns534-submission);
* отчеты в Росстат (urn:docflow:stat-report).

С помощью методов API можно передать только черновик с приложениями налоговой декларации по НДС. Остальные приложения не получится передать. Их можно добавить перед отправкой черновика через веб-интерфейс.

**Особенности передачи черновиков:**

* в веб-интерфейс можно передать один черновик за раз;
* можно передать черновик из API в веб-интерфейс, но передать обратно из веб-интерфейса не получится;
* можно передать созданные и проверенные черновики со статусами **new** и **checked**, но нельзя передать подготовленные и отправленные черновики со статусами **readyToSent** и **sent**;
* подпись отправителя и доверенности вместе с черновиками не передаются в веб-интерфейс. 

Алгоритм передачи черновика
---------------------------

1. :ref:`Создайте и наполните<rst-markup-drafts>` черновик. При необходимости можно проверить черновик методом :ref:`POST Check<rst-markup-check>`.

2. Передайте черновик в веб-интерфейс Контур.Экстерна: :ref:`POST CreateWebDraft<rst-markup-CreateWebDraft>`. В запросе передайте идентификатора черновика ``draftId``. В ответе вернется ссылка на созданный черновик в веб-интерфейсе. Статус черновика в API поменяется на **TransferedToWeb**. 

После того как черновик будет отправлен через веб-интерфейс Экстерна в контролирующий орган, у него поменяется статус на **SentViaWeb**. В черновике появится идентификатор созданного документооборота ``docflowId`` и ссылка на него. 

:doc:`Работу с документооборотом</howto/howtodocflow>` можно также продолжить и в API, и в веб-интерфейсе. 

