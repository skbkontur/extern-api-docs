Передача черновика в веб-интерфейс Контур.Экстерна
==================================================

При одновременной работе в API и в веб-интерфейсе Контур.Экстерна можно работать с общими черновиками. Такие черновики можно создавать и наполнять в API и с помощью метода передавать их в веб-интерфейс. Общий черновик можно отредактировать в веб-интерфейсе и отправить в контролирующий орган, но изменения не будут синхроннизированы с API. Черновик в API после перемещения его в веб-интерфейс будет заблокирован для редактирования и других действий с ним. 

Можно создавать общие черновики для следующих типов документооборотов:

* декларации и 2-НДФЛ в ФНС (urn:docflow:fns534-report);
* заявления в ФНС (urn:docflow:fns534-application);
* представления в ФНС (urn:docflow:fns534-submission);
* отчеты в Росстат (urn:docflow:stat-report).

Вместе с черновиками нельзя передавать приложения к отчетам, кроме налоговой декларации НДС. 

**Особенности общих черновиков:**

* в веб-интерфейс можно передать один черновик за раз;
* черновики из веб-интерфеса нельзя получить в API;
* можно передать только созданные черновики (статус **new**) и проверенные (статус **checked**);
* нельзя передать подготовленные к отправке черновики (статус **readyToSent**) и отправленные (статус **sent**);
* подпись отправителя и доверенности вместе с общими черновиками не передаются в веб-интерфейс. 

Алгоритм работы
---------------

1. :ref:`Создайте и наполните<rst-markup-drafts>` черновик. При необходимости можно проверить черновик методом :ref:`POST Check<rst-markup-check>`.

2. Создайте общий черновик в веб-интерфейсе Контур.Экстерна: :ref:`POST CreateWebDraft<rst-markup-CreateWebDraft>`. В запросе передайте метаинформацию черновика с помощью идентификатора черновика ``draftId``. В ответе вернется ссылка на созданный черновик в веб-интерфейсе Контур.Экстерн. Статус черновика в API поменяется на **TransferedToWeb**. 

После того как черновик будет отправлен через веб-интерфейс Экстерна в контролирующий орган, у него поменяется статус на **SentViaWeb**. В черновике появится идентификатор созданного документооборота ``docflowId`` и ссылка на него. Работа с документооборотом в API Контур.Экстерн не изменяется. 

