.. _`POST Upload`: https://developer.kontur.ru/doc/extern.contents/method?type=post&path=%2Fv1%2F%7BaccountId%7D%2Fcontents
.. _`PUT UploadByParts`: https://developer.kontur.ru/doc/extern.contents/method?type=put&path=%2Fv1%2F%7BaccountId%7D%2Fcontents%2F%7Bid%7D
.. _`GET Download`: https://developer.kontur.ru/doc/extern.contents/method?type=get&path=%2Fv1%2F%7BaccountId%7D%2Fcontents%2F%7Bid%7D

Методы сервиса контентов
========================

.. _rst-markup-post-content:

Инициализация загрузки контента
-------------------------------

Метод: `POST Upload`_

Метод инициализирует загрузку контента. Контент нужно загружать частями по 64 МБ.

**Заголовки запроса**

``Content-Type`` — отвечает за тип сохраняемого контента, если он не передан, будет использовано значение по умолчанию application-octet/stream.

``Content-Range`` — инициализирует частичную загрузку контента.

    В Content-Range укажите байтовые диапазоны. Заголовок принимает значения вида: "bytes {from}-{to}/{totalLength}" или "bytes {from}-{to}/*", где:

    * from — целое число. Начало диапазона;
    * to — целое число. Конец диапазона;
    * totalLength — целое число. Размер всего контента.

    Если заранее неизвестен размер всего контента, вместо totalLength укажите * . В этом случае решение о полной загрузке контента будет приниматься только после получения сервером запроса с явным указанием totalLength.

**Коды ответа**

- 200 Ok — инициализирована загрузка контента по частям. Ответ содержит идентификатор контента. Необходимо продолжить загрузку методом PUT.
- 201 Create — загрузка контента завершена. Ответ содержит идентификатор контента. 
- 413 RequestEntityTooLarge — размер загружаемого контента больше 64 Мбайт.

.. _rst-markup-put-content:

Загрузка контента по частям
---------------------------

Метод: `PUT UploadByParts`_

Метод загружает часть контента.

**Заголовки запроса**

 ``Content-Range`` — указывает необходимые байтовые диапазоны части загружаемого контента. Контент нужно разбивать на части по 64 Мбайт. Загрузка частей возможна в любом порядке. 

**Коды ответа**

- 200 Ok — часть контента успешно загружена. Ответ содержит идентификатор контента.
- 201 Create — последняя часть контента успешно загружена. Ответ содержит идентификатор загруженного контента.
- 413 RequestEntityTooLarge — размер загружаемого контента больше 64 МБ.

.. _rst-markup-get-content:

Получение контента по идентификатору
------------------------------------

Метод: `GET Download`_

Метод инициализирует скачивание контента частями по 64 МБ. Для этого передайте в заголовке ``Range`` байтовый диапазон в виде "bytes={from}-{to}", где:
    
    * from — целое число. Начало диапазона;
    * to — целое число. Конец диапазона. 

**Коды ответа**

- 200 Ok — скачивание контента успешно завершено. Ответ содержит контент запрошенного ресурса.
- 206 PortialContent— скачивание части контента успешно завершено. Ответ содержит контент запрошенного ресурса.