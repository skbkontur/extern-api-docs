.. _`инструкции`: https://support.kontur.ru/extern/mnogopolzovatelskij-rezhim#id-%D0%9C%D0%BD%D0%BE%D0%B3%D0%BE%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D1%82%D0%B5%D0%BB%D1%8C%D1%81%D0%BA%D0%B8%D0%B9%D1%80%D0%B5%D0%B6%D0%B8%D0%BC(%D1%81%D0%BE%D0%B2%D0%BC%D0%B5%D1%81%D1%82%D0%BD%D0%B0%D1%8F%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0)-%D0%9A%D0%B0%D0%BA%D0%B4%D0%BE%D0%B1%D0%B0%D0%B2%D0%B8%D1%82%D1%8C%D0%BD%D0%BE%D0%B2%D0%BE%D0%B3%D0%BE%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D1%82%D0%B5%D0%BB%D1%8F 
.. _`Кабинета клиента`: https://www.kontur-extern.ru/support/faq/56/787

.. _rst-markup-mpr:

Многопользовательский режим
===========================

В Контур.Экстерн можно разграничить работу с отчетностью между сотрудниками с помощью многопользовательского режима. Например, крупные компании имеют большую структуру филиалов. Поэтому работу над отчетностью они могут разделить между несколькими пользователями. Одни будут заполнять и отправлять отчетность в контролирующие органы, другие работать с требованиями ФНС.

В многопользовательском режиме пользователи делятся на администратора и дополнительных пользователей. Администратор может добавлять пользователей, согласно тарифному плану, и ограничивать их работу правами доступа. Настройка многопользовательского режима происходит в веб-интерфейсе Контур.Экстерна, подробнее об этом читайте в `инструкции`_.

Администратор имеет доступ ко всем учетным записям. Учетные записи могут быть объединены в группы с идентификатором ``abonentId``. На этот идентификатор администратор может ориентироваться при добавлении и удалении организации или пользователя.

В API Контур.Экстерна мы поддержали работу с многопользовательским режимом. С помощью методов можно посмотреть:

* сведения об учетной записи;
* сведения о пользователе.

Сведения об учетной записи
--------------------------

В API каждый пользователь может посмотреть следующие сведения об учетной записи:

* сведения о головной организации: ИНН, КПП, наименование;
* список продуктов Контура, к которым он имеет доступ;
* роль пользователя в данной учетной записи: администратор, пользователь, генеральный директор (пользователь `Кабинета клиента`_);
* наименование учетной записи;
* идентификатор группы, в которую входит учетная запись;
* разрешения пользователя для работы с организацией в учетной записи.

Разрешения – это список прав на работу с организацией, которые выдает администратор пользователю в веб-интерфейсе Контур.Экстерн.

Список разрешений:

* Доступ в веб-интерфейс Контур.Экстерна. Может ли пользователь заходить в веб-интерфейс Контур.Экстерна для определенных организаций.
* Получение требований ФНС. Может ли пользователь получать требования от ФНС.
* Добавление дочерних организаций. Может ли пользователь самостоятельно добавлять дочерние организации на обслуживание в учетную запись.

**Порядок взаимодействия с методами API**

С помощью методов API пользователь может:

1. Получить список всех доступных учетных записей вместе со сведениями: :ref:`GET All<rst-markup-all>`.
2. Получить сведения об учетной записи по ее идентификатору ``accountId``: :ref:`GET Account<rst-markup-account>`.

Ответы методов зависят от авторизованного пользователя, которые определяются по :ref:`Access Token<rst-markup-access-token>`. Администратор может получить информацию о всех заведенных учетных записях. Дополнительный пользователь может получить сведения об учетных записях согласно выданным разрешениям.

Сведения о пользователе
-----------------------

В API для каждого пользователя можно посмотреть:

* логин;
* ФИО;
* сертификаты для авторизации;
* права доступа для работы с организациями и формами отчетности.

Администратор может настраивать, с какими организациями и формами отчетности могут работать пользователи. Настройки применяются для каждого пользователя индивидуально.

Список прав доступа:

* Включение прав доступа. Может ли пользовать работать со всеми организациями и со всеми формами отчетности.
* Доступ к организациям. Список организаций, с которыми может работать пользователь в учетной записи. 
* Доступ к формам. Список форм отчетности, с которыми может работать пользователь в учетной записи. 

**Порядок взаимодействия с методами API**

С помощью API можно получить список пользователей учетной записи со сведениями о них: :ref:`GET Users<rst-markup-users>`.
